var Tailspin=new function(){function nonStrictGetValue(t,e){return t[e]}function nonStrictPutValue(t,e,n){return t[e]=n}function nonStrictDeleteValue(t,e){return delete t[e]}var Tailspin=this,END=0,NEWLINE=1,SEMICOLON=2,COMMA=3,ASSIGN=4,HOOK=5,COLON=6,CONDITIONAL=7,OR=8,AND=9,BITWISE_OR=10,BITWISE_XOR=11,BITWISE_AND=12,EQ=13,NE=14,STRICT_EQ=15,STRICT_NE=16,LT=17,LE=18,GE=19,GT=20,LSH=21,RSH=22,URSH=23,PLUS=24,MINUS=25,MUL=26,DIV=27,MOD=28,NOT=29,BITWISE_NOT=30,UNARY_PLUS=31,UNARY_MINUS=32,INCREMENT=33,DECREMENT=34,DOT=35,LEFT_BRACKET=36,RIGHT_BRACKET=37,LEFT_CURLY=38,RIGHT_CURLY=39,LEFT_PAREN=40,RIGHT_PAREN=41,SCRIPT=42,BLOCK=43,LABEL=44,FOR_IN=45,CALL=46,NEW_WITH_ARGS=47,INDEX=48,ARRAY_INIT=49,OBJECT_INIT=50,PROPERTY_INIT=51,GETTER=52,SETTER=53,GROUP=54,LIST=55,ARRAY_COMP=56,COMP_TAIL=57,IDENTIFIER=58,NUMBER=59,STRING=60,REGEXP=61,BREAK=62,CASE=63,CATCH=64,CONST=65,CONTINUE=66,DEBUGGER=67,DEFAULT=68,DELETE=69,DO=70,ELSE=71,EXPORT=72,FALSE=73,FINALLY=74,FOR=75,FUNCTION=76,IF=77,IMPORT=78,IN=79,INSTANCEOF=80,NEW=81,NULL=82,RETURN=83,SWITCH=84,THIS=85,THROW=86,TRUE=87,TRY=88,TYPEOF=89,VAR=90,VOID=91,WHILE=92,WITH=93,CLASS=94,EXTENDS=95,ENUM=96,SUPER=97;Tailspin.Definitions={tokens:["END","\n",";",",","=","?",":","CONDITIONAL","||","&&","|","^","&","==","!=","===","!==","<","<=",">=",">","<<",">>",">>>","+","-","*","/","%","!","~","UNARY_PLUS","UNARY_MINUS","++","--",".","[","]","{","}","(",")","SCRIPT","BLOCK","LABEL","FOR_IN","CALL","NEW_WITH_ARGS","INDEX","ARRAY_INIT","OBJECT_INIT","PROPERTY_INIT","GETTER","SETTER","GROUP","LIST","ARRAY_COMP","COMP_TAIL","IDENTIFIER","NUMBER","STRING","REGEXP","break","case","catch","const","continue","debugger","default","delete","do","else","export","false","finally","for","function","if","import","in","instanceof","new","null","return","switch","this","throw","true","try","typeof","var","void","while","with","class","extends","enum","super"],whitespace:{"	":!0,"":!0,"\f":!0," ":!0," ":!0,"﻿":!0," ":!0,"᠎":!0," ":!0," ":!0," ":!0," ":!0," ":!0," ":!0," ":!0," ":!0," ":!0," ":!0," ":!0,"\u2028":!0,"\u2029":!0," ":!0," ":!0,"　":!0},newlines:{"\n":!0,"\r":!0,"\u2028":!0,"\u2029":!0},opTypeNames:{"\n":"NEWLINE",";":"SEMICOLON",",":"COMMA","?":"HOOK",":":"COLON","||":"OR","&&":"AND","|":"BITWISE_OR","^":"BITWISE_XOR","&":"BITWISE_AND","===":"STRICT_EQ","==":"EQ","=":"ASSIGN","!==":"STRICT_NE","!=":"NE","<<":"LSH","<=":"LE","<":"LT",">>>":"URSH",">>":"RSH",">=":"GE",">":"GT","++":"INCREMENT","--":"DECREMENT","+":"PLUS","-":"MINUS","*":"MUL","/":"DIV","%":"MOD","!":"NOT","~":"BITWISE_NOT",".":"DOT","[":"LEFT_BRACKET","]":"RIGHT_BRACKET","{":"LEFT_CURLY","}":"RIGHT_CURLY","(":"LEFT_PAREN",")":"RIGHT_PAREN"},keywords:{"break":62,"case":63,"catch":64,"const":65,"continue":66,"debugger":67,"default":68,"delete":69,"do":70,"else":71,"export":72,"false":73,"finally":74,"for":75,"function":76,"if":77,"import":78,"in":79,"instanceof":80,"new":81,"null":82,"return":83,"switch":84,"this":85,"throw":86,"true":87,"try":88,"typeof":89,"var":90,"void":91,"while":92,"with":93,"class":94,"extends":95,"enum":96,"super":97},strictKeywords:{"implements":!0,"interface":!0,let:!0,module:!0,"package":!0,"private":!0,"protected":!0,"public":!0,"static":!0,use:!0,yield:!0},isStatementStartCode:{62:!0,65:!0,66:!0,67:!0,70:!0,75:!0,77:!0,83:!0,84:!0,86:!0,88:!0,90:!0,92:!0,93:!0},tokenIds:{END:0,NEWLINE:1,SEMICOLON:2,COMMA:3,ASSIGN:4,HOOK:5,COLON:6,CONDITIONAL:7,OR:8,AND:9,BITWISE_OR:10,BITWISE_XOR:11,BITWISE_AND:12,EQ:13,NE:14,STRICT_EQ:15,STRICT_NE:16,LT:17,LE:18,GE:19,GT:20,LSH:21,RSH:22,URSH:23,PLUS:24,MINUS:25,MUL:26,DIV:27,MOD:28,NOT:29,BITWISE_NOT:30,UNARY_PLUS:31,UNARY_MINUS:32,INCREMENT:33,DECREMENT:34,DOT:35,LEFT_BRACKET:36,RIGHT_BRACKET:37,LEFT_CURLY:38,RIGHT_CURLY:39,LEFT_PAREN:40,RIGHT_PAREN:41,SCRIPT:42,BLOCK:43,LABEL:44,FOR_IN:45,CALL:46,NEW_WITH_ARGS:47,INDEX:48,ARRAY_INIT:49,OBJECT_INIT:50,PROPERTY_INIT:51,GETTER:52,SETTER:53,GROUP:54,LIST:55,ARRAY_COMP:56,COMP_TAIL:57,IDENTIFIER:58,NUMBER:59,STRING:60,REGEXP:61,BREAK:62,CASE:63,CATCH:64,CONST:65,CONTINUE:66,DEBUGGER:67,DEFAULT:68,DELETE:69,DO:70,ELSE:71,EXPORT:72,FALSE:73,FINALLY:74,FOR:75,FUNCTION:76,IF:77,IMPORT:78,IN:79,INSTANCEOF:80,NEW:81,NULL:82,RETURN:83,SWITCH:84,THIS:85,THROW:86,TRUE:87,TRY:88,TYPEOF:89,VAR:90,VOID:91,WHILE:92,WITH:93,CLASS:94,EXTENDS:95,ENUM:96,SUPER:97},assignOps:{"|":10,"^":11,"&":12,"<<":21,">>":22,">>>":23,"+":24,"-":25,"*":26,"/":27,"%":28}},Tailspin.Utility=function(){"use strict";function t(t,e){return new(t.bind.apply(t,[,].concat(Array.prototype.slice.call(e))))}function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function n(t,e){for(var n;!n&&t;)n=Object.getOwnPropertyDescriptor(t,e),n||(t=Object.getPrototypeOf(t));return n}function i(t,e){this.table=t||Object.create(null,{}),this.size=e||0}function r(t){this.elts=t||null}i.create=function(t){for(var e=Object.create(null,{}),n=0,r=Object.getOwnPropertyNames(t),s=0,o=r.length;s<o;s++){var a=r[s];e[a]=t[a],n++}return new i(e,n)},i.prototype={has:function(t){return e(this.table,t)},set:function(t,n){e(this.table,t)||this.size++,this.table[t]=n},get:function(t){return this.table[t]},getDef:function(t,n){return e(this.table,t)||(this.size++,this.table[t]=n()),this.table[t]},forEach:function(t){var n=this.table;for(var i in n)e(n,i)&&t.call(this,i,n[i])},map:function(t){var e=Object.create(null,{});return this.forEach(function(n,i){e[n]=t.call(this,i,n)}),new i(e,this.size)},mapObject:function(t){var e=Object.create(null,{});return this.forEach(function(n,i){e[n]=t.call(this,i,n)}),e},toObject:function(){return this.mapObject(function(t){return t})},choose:function(){return Object.getOwnPropertyNames(this.table)[0]},remove:function(t){e(this.table,t)&&(this.size--,delete this.table[t])},copy:function(){var t=Object.create(null,{});for(var n in this.table)e(t,n)&&(t[n]=this.table[n]);return new i(t,this.size)},keys:function(){return Object.keys(this.table)},toString:function(){return"[object Dict]"}},r.prototype={push:function(t){return new r({top:t,rest:this.elts})},top:function(){if(!this.elts)throw new Error("empty stack");return this.elts.top},isEmpty:function(){return null===this.top},find:function(t){for(var e=this.elts;e;e=e.rest)if(t(e.top))return e.top;return null},has:function(t){return Boolean(this.find(function(e){return e===t}))},forEach:function(t){for(var e=this.elts;e;e=e.rest)t(e.top)}};var s={};return s.hasDirectProperty=e,s.getPropertyDescriptor=n,s.applyNew=t,s.Dict=i,s.Stack=r,s}(),Tailspin.Lexer=function(){"use strict";function t(t,e){if(t<="")return t>="a"&&t<="z"||t>="A"&&t<="Z"||"$"===t||"_"===t||!e&&t>="0"&&t<="9"?!0:!1;var n={};n["x"+t]=!0,n[t]=!0;var i=!1;try{i=Function("x","return (x."+(e?"":"x")+t+");")(n)===!0}catch(r){}return i}function e(e){if("string"!==typeof e)return!1;if(0===e.length)return!1;if(!t(e[0],!0))return!1;for(var n=1;n<e.length;n++)if(!t(e[n],!1))return!1;return!0}function n(t,e,n,i){this.cursor=0,this.source=String(t),this.tokens=[],this.tokenIndex=0,this.lookahead=0,this.scanNewlines=!1,this.filename=e||"",this.lineno=n||1,this.blockComments=null,this.sandbox=i||new Function("return this")()}var i=Tailspin.Definitions,r=i.tokenIds,s={};for(var o in i.opTypeNames)if(i.opTypeNames.hasOwnProperty(o)){if("\n"===o||"."===o)continue;for(var a=s,c=0;c<o.length;c++){var u=o[c];a.hasOwnProperty(u)||(a[u]={}),a=a[u],a.op=o}}n.prototype={get done(){return this.peek(!0)===r.END},get token(){return this.tokens[this.tokenIndex]},match:function(t,e,n){return this.get(e,n)===t||this.unget()},mustMatch:function(t,e){if(!this.match(t,!1,e))throw this.newSyntaxError("Missing "+i.tokens[t].toLowerCase());return this.token},peek:function(t,e){var n,i;return this.lookahead?(i=this.tokens[3&this.tokenIndex+this.lookahead],n=this.scanNewlines&&i.lineno!==this.lineno?r.NEWLINE:i.type):(n=this.get(t,e),this.unget()),n},peekOnSameLine:function(t){this.scanNewlines=!0;var e=this.peek(t);return this.scanNewlines=!1,e},lastBlockComment:function(){var t=this.blockComments.length;return t?this.blockComments[t-1]:null},skip:function(){var t=this.source;for(this.blockComments=[];;){var e=t[this.cursor++],n=t[this.cursor];if(i.newlines[e]){if("\r"===e&&"\n"===n)continue;e="\n"}if("\n"!==e||this.scanNewlines){if("/"===e&&"*"===n){for(var r=++this.cursor,s=r;;){if(e=t[this.cursor++],void 0===e)throw this.newSyntaxError("Unterminated comment");if("*"===e){if(n=t[this.cursor],"/"===n){s=this.cursor-1,this.cursor++;break}}else"\n"===e&&this.lineno++}this.blockComments.push(t.substring(r,s))}else if("/"===e&&"/"===n)for(this.cursor++;;){if(e=t[this.cursor++],n=t[this.cursor],void 0===e)return;if(i.newlines[e]&&("\r"!==e||"\n"!==n)&&(e="\n"),"\n"===e){this.scanNewlines?this.cursor--:this.lineno++;break}}else if(!i.whitespace.hasOwnProperty(e))return this.cursor--,void 0}else this.lineno++}},lexExponent:function(){var t=this.source,e=t[this.cursor];if("e"===e||"E"===e){if(this.cursor++,u=t[this.cursor++],("+"===u||"-"===u)&&(u=t[this.cursor++]),u<"0"||u>"9")throw this.newSyntaxError("Missing exponent");do u=t[this.cursor++];while(u>="0"&&u<="9");return this.cursor--,!0}return!1},lexZeroNumber:function(t){var e=this.token,n=this.source;if(e.type=r.NUMBER,t=n[this.cursor++],"."===t){do t=n[this.cursor++];while(t>="0"&&t<="9");this.cursor--,this.lexExponent(),e.value=this.sandbox.parseFloat(n.substring(e.start,this.cursor))}else if("x"===t||"X"===t){do t=n[this.cursor++];while(t>="0"&&t<="9"||t>="a"&&t<="f"||t>="A"&&t<="F");if(this.cursor--,e.start+2>=this.cursor)throw this.newSyntaxError("At least one digit must occur after 0x");e.value=this.sandbox.parseInt(n.substring(e.start,this.cursor))}else if(t>="0"&&t<="9"){if(this.parser.x.strictMode)throw this.newSyntaxError("Octal escapes are forbidden in strict mode");do t=n[this.cursor++];while(t>="0"&&t<="9");this.cursor--,e.value=this.sandbox.parseInt(n.substring(e.start,this.cursor))}else this.cursor--,this.lexExponent(),e.value=0},lexNumber:function(t){var e=this.token,n=this.source;e.type=r.NUMBER;var i=!1;do t=n[this.cursor++],"."!==t||i||(i=!0,t=n[this.cursor++]);while(t>="0"&&t<="9");this.cursor--;var s=this.lexExponent();i=i||s;var o=n.substring(e.start,this.cursor);e.value=i?this.sandbox.parseFloat(o):this.sandbox.parseInt(o)},lexDot:function(t){var e=this.token,n=this.source,i=n[this.cursor];if(i>="0"&&i<="9"){do t=n[this.cursor++];while(t>="0"&&t<="9");this.cursor--,this.lexExponent(),e.type=r.NUMBER,e.value=this.sandbox.parseFloat(n.substring(e.start,this.cursor))}else e.type=r.DOT,e.assignOp=null,e.value="."},lexString:function(t){var e=this.token,n=this.source;e.type=r.STRING;var s=!1,o=t;if(this.cursor>=n.length)throw this.newSyntaxError("Unterminated string literal");for(;(t=n[this.cursor++])!==o;){if(i.newlines[t])throw this.newSyntaxError("Unterminated string literal, illegal unescaped new-line.");if("\\"===t&&(s=!0,this.cursor+1<n.length&&"\r"===n[this.cursor]&&"\n"===n[this.cursor+1]&&this.cursor++,this.cursor++),this.cursor>=n.length)throw this.newSyntaxError("Unterminated string literal")}e.value=this.parser.x.strictMode?this.sandbox.eval('"use strict"; '+n.substring(e.start,this.cursor)):this.sandbox.eval(n.substring(e.start,this.cursor))},lexRegExp:function(t){var e=this.token,n=this.source;e.type=r.REGEXP;do if(t=n[this.cursor++],"\\"===t)this.cursor++;else if("["===t){do{if(void 0===t)throw this.newSyntaxError("Unterminated character class");"\\"===t&&this.cursor++,t=n[this.cursor++]}while("]"!==t)}else if(void 0===t)throw this.newSyntaxError("Unterminated regex");while("/"!==t);do t=n[this.cursor++];while(t>="a"&&t<="z");this.cursor--,e.value=this.sandbox.eval(n.substring(e.start,this.cursor))},lexOp:function(t){var e=this.token,n=this.source,o=s[t],a=n[this.cursor];o.hasOwnProperty(a)&&(o=o[a],this.cursor++,a=n[this.cursor],o.hasOwnProperty(a)&&(o=o[a],this.cursor++,a=n[this.cursor]));var c=o.op;i.assignOps[c]&&"="===n[this.cursor]?(this.cursor++,e.type=r.ASSIGN,e.assignOp=i.tokenIds[i.opTypeNames[c]],c+="="):(e.type=i.tokenIds[i.opTypeNames[c]],e.assignOp=null),e.value=c},lexIdent:function(t,e){for(var n=this.token,s=t;null!==(t=this.getValidIdentifierChar(!1));)s+=t;return n.type=r.IDENTIFIER,n.value=s,e?void 0:this.parser.x.strictMode&&i.strictKeywords.hasOwnProperty(s)?(n.type=i.strictKeywords[s],void 0):(i.keywords.hasOwnProperty(s)&&(n.type=i.keywords[s]),void 0)},get:function(t,e){for(var n;this.lookahead;){var o=3&this.tokenIndex+1;if(n=this.tokens[o],t&&"/"===n.value){this.discardLookahead();break}if(this.lookahead--,this.tokenIndex=o,n.type!==r.NEWLINE||this.scanNewlines)return e&&i.keywords.hasOwnProperty(n.value)?r.IDENTIFIER:n.type}this.skip(),this.tokenIndex=3&this.tokenIndex+1,n=this.tokens[this.tokenIndex],n||(this.tokens[this.tokenIndex]=n={});var a=this.source;if(this.cursor>=a.length)return n.type=r.END,n.type;n.start=this.cursor,n.lineno=this.lineno;var c=this.getValidIdentifierChar(!0),u=null===c?a[this.cursor++]:null;if(null!==c)this.lexIdent(c,e);else if(t&&"/"===u)this.lexRegExp(u);else if(s.hasOwnProperty(u))this.lexOp(u);else if("."===u)this.lexDot(u);else if(u>="1"&&u<="9")this.lexNumber(u);else if("0"===u)this.lexZeroNumber(u);else if('"'===u||"'"===u)this.lexString(u);else{if(!this.scanNewlines||!i.newlines.hasOwnProperty(u))throw this.newSyntaxError("Illegal token");"\r"===u&&"\n"===a[this.cursor]&&this.cursor++,n.type=r.NEWLINE,n.value="\n",this.lineno++}return n.end=this.cursor,n.type},unget:function(){if(4===++this.lookahead)throw"PANIC: too much lookahead!";this.tokenIndex=3&this.tokenIndex-1},discardLookahead:function(){for(;this.lookahead;){--this.lookahead,this.tokenIndex=3&this.tokenIndex+1;var t=this.tokens[this.tokenIndex];this.cursor=t.start}},newError:function(t,e){e="["+(this.filename?this.filename+":":"")+this.lineno+"] "+e;var n=new t(e,this.filename,this.lineno);return n.source=this.source,n.sourceLine=this.lineno,n.cursor=this.lookahead?this.tokens[3&this.tokenIndex+this.lookahead].start:this.cursor,n},newSyntaxError:function(t){return this.newError(SyntaxError,t)},newReferenceError:function(t){return this.newError(ReferenceError,t)},getValidIdentifierChar:function(e){var n=this.source;if(this.cursor>=n.length)return null;var i=n[this.cursor],r=1;if("\\"===i&&"u"===n[this.cursor+1]){try{i=String.fromCharCode(parseInt(n.substring(this.cursor+2,this.cursor+6),16))}catch(s){return null}r=6}var o=t(i,e);return o&&(this.cursor+=r),o?i:null}};var h={};return h.isIdentifier=e,h.Tokenizer=n,h}(),Tailspin.Parser=function(){"use strict";function pushDestructuringVarDecls(t,e){for(var n in t){var i=t[n];i.type===IDENTIFIER?e.varDecls.push(i):pushDestructuringVarDecls(i,e)}}function Parser(t){t.parser=this,this.t=t,this.x=null,this.unexpectedEOF=!1}function StaticContext(t,e,n,i){this.parentScript=t,this.parentBlock=e||t,this.inFunction=n||null,this.inForLoopInit=!1,this.topLevel=!0,this.allLabels=new Stack,this.currentLabels=new Stack,this.labeledTargets=new Stack,this.defaultLoopTarget=null,this.defaultTarget=null,this.strictMode=i}function Pragma(t){if(t.type===SEMICOLON){var e=t.expression;if(e&&e.type===STRING)return"use strict"===e.value&&e.end-e.start==="use strict".length+2&&(t.pragma="strict"),!0}return!1}function Node(t,e){var n=t.token;n?(this.type=n.type,this.value=n.value,this.lineno=n.lineno,this.start=n.start,this.end=n.end):this.lineno=t.lineno,this.filename=t.filename,this.children=[];for(var i in e)this[i]=e[i]}function SyntheticNode(t){this.children=[];for(var e in t)this[e]=t[e];this.synthetic=!0}function unevalableConst(t){var e=Definitions.tokens[t],n=Definitions.opTypeNames.hasOwnProperty(e)?Definitions.opTypeNames[e]:Definitions.keywords.hasOwnProperty(e)?e.toUpperCase():e;return{toSource:function(){return n}}}function tokenString(t){var e=Definitions.tokens[t];return/^\W/.test(e)?Definitions.opTypeNames[e]:e.toUpperCase()}function blockInit(){return{type:BLOCK,varDecls:[]}}function scriptInit(){return{type:SCRIPT,funDecls:[],varDecls:[],modDefns:new Dict,modAssns:new Dict,modDecls:new Dict,modLoads:new Dict,impDecls:[],expDecls:[],hasEmptyReturn:!1,hasReturnWithValue:!1}}function repeatString(t,e){for(var n="",i=t+n;--e>=0;)n+=i;return n}function isPragmaToken(t){switch(t){case IDENTIFIER:case STRING:case NUMBER:case NULL:case TRUE:case FALSE:return!0}return!1}function parse(t,e,n,i,r){var s=new Tokenizer(t,e,n,r),o=new Parser(s);return o.Script(null,!0,i)}function parseFunction(t,e,n,i,r,s){var o=new Tokenizer(t,i,r,s),a=new Parser(o);return a.x=new StaticContext(null,null,null,!1),a.FunctionDefinition(e,n)}var Tokenizer=Tailspin.Lexer.Tokenizer,Definitions=Tailspin.Definitions,Dict=Tailspin.Utility.Dict,Stack=Tailspin.Utility.Stack;StaticContext.prototype={update:function(t){var e={};for(var n in t)e[n]={value:t[n],writable:!0,enumerable:!0,configurable:!0};return Object.create(this,e)},pushLabel:function(t){return this.update({currentLabels:this.currentLabels.push(t),allLabels:this.allLabels.push(t)})},pushTarget:function(t){var e=t.isLoop,n=e||t.type===SWITCH;return this.currentLabels.isEmpty()?(e&&this.update({defaultLoopTarget:t}),n&&this.update({defaultTarget:t}),this):(t.labels=new Dict,this.currentLabels.forEach(function(e){t.labels.set(e,!0)}),this.update({currentLabels:new Stack,labeledTargets:this.labeledTargets.push(t),defaultLoopTarget:e?t:this.defaultLoopTarget,defaultTarget:n?t:this.defaultTarget}))},nest:function(){return this.topLevel?this.update({topLevel:!1}):this},banWith:function(){return this.strictMode}};var Pp=Parser.prototype;Pp.withContext=function(t,e){var n=this.x;this.x=t;var i=e.call(this);return this.x=n,i},Pp.newNode=function(t){return new Node(this.t,t)},Pp.fail=function(t){throw this.t.newSyntaxError(t)},Pp.checkValidIdentifierIfStrict=function(t,e){!this.x.strictMode||"eval"!==e&&"arguments"!==e||this.fail("Cannot declare a "+t+" named '"+e+"' in strict mode.")},Pp.match=function(t,e,n){return this.t.match(t,e,n)},Pp.mustMatch=function(t,e){return this.t.mustMatch(t,e)},Pp.peek=function(t,e){return this.t.peek(t,e)},Pp.peekOnSameLine=function(t){return this.t.peekOnSameLine(t)},Pp.done=function(){return this.t.done},Pp.Script=function(t,e,n){var i=this.newNode(scriptInit()),r=new StaticContext(i,i,t,n);return this.withContext(r,function(){this.Statements(i,!0)}),e&&!this.done()&&this.fail("expected end of input"),i};var Np=Node.prototype=SyntheticNode.prototype={};Np.constructor=Node;var TO_SOURCE_SKIP={type:!0,value:!0,lineno:!0,start:!0,end:!0,tokenizer:!0,assignOp:!0};Np.toSource=function(){var t={};if(t.type=unevalableConst(this.type),this.generatingSource)return t.toSource();this.generatingSource=!0,"value"in this&&(t.value=this.value),"lineno"in this&&(t.lineno=this.lineno),"start"in this&&(t.start=this.start),"end"in this&&(t.end=this.end),this.assignOp&&(t.assignOp=unevalableConst(this.assignOp));for(var e in this)!this.hasOwnProperty(e)||e in TO_SOURCE_SKIP||(t[e]=this[e]);try{return t.toSource()}finally{delete this.generatingSource}},Np.push=function(t){return null!==t&&(t.start<this.start&&(this.start=t.start),this.end<t.end&&(this.end=t.end)),this.children.push(t)},Node.indentLevel=0,Np.toString=function(){var t=[];for(var e in this)this.hasOwnProperty(e)&&"type"!==e&&"target"!==e&&t.push({id:e,value:this[e]});t.sort(function(t,e){return t.id<e.id?-1:1});var n="    ",i=++Node.indentLevel,r="{\n"+repeatString(n,i)+"type: "+tokenString(this.type);for(e=0;e<t.length;e++)r+=",\n"+repeatString(n,i)+t[e].id+": "+t[e].value;return i=--Node.indentLevel,r+="\n"+repeatString(n,i)+"}"},Np.synth=function(t){var e=new SyntheticNode(t);return e.filename=this.filename,e.lineno=this.lineno,e.start=this.start,e.end=this.end,e};var LOOP_INIT={isLoop:!0};Pp.MaybeLeftParen=function(){return this.mustMatch(LEFT_PAREN).type},Pp.MaybeRightParen=function(t){t===LEFT_PAREN&&this.mustMatch(RIGHT_PAREN)},Pp.checkContextForStrict=function(){for(var pragmas=this.x.parentBlock.children,i=0,c=pragmas.length-1;i<c;i++)eval('"use strict"; '+this.t.source.substring(pragmas[i].start,pragmas[i].end));if(this.x.inFunction){this.checkValidIdentifierIfStrict("function",this.x.inFunction.name);for(var params=this.x.inFunction.params,i=0,c=params.length;i<c;i++)this.checkValidIdentifierIfStrict("parameter",params[i]),params.indexOf(params[i])!==i&&this.fail("Cannot declare a parameter named '"+params[i]+"' more than once in strict mode")}},Pp.Statements=function(t,e){var n=!!e;try{for(this.x.strictMode&&(t.strict=!0);!this.done()&&this.peek(!0)!==RIGHT_CURLY;){var i=this.Statement();t.push(i),n&&Pragma(i)?"strict"===i.pragma&&(this.x.strictMode=!0,t.strict=!0,this.checkContextForStrict()):n=!1}}catch(r){throw this.done()&&(this.unexpectedEOF=!0),r}},Pp.Block=function(){this.mustMatch(LEFT_CURLY);var t=this.newNode(blockInit()),e=this.x.update({parentBlock:t}).pushTarget(t);return this.withContext(e,function(){this.Statements(t)}),this.mustMatch(RIGHT_CURLY),t};var DECLARED_FORM=0,EXPRESSED_FORM=1,STATEMENT_FORM=2;Pp.Statement=function(){var t,e,n,i,r,s,o,a=this.t.get(!0),c=this.t.blockComments;switch(a){case FUNCTION:return this.FunctionDefinition(!0,this.x.topLevel?DECLARED_FORM:STATEMENT_FORM,c);case LEFT_CURLY:return e=this.newNode(blockInit()),s=this.x.update({parentBlock:e}).pushTarget(e).nest(),this.withContext(s,function(){this.Statements(e)}),this.mustMatch(RIGHT_CURLY),e;case IF:return e=this.newNode(),e.condition=this.HeadExpression(),s=this.x.pushTarget(e).nest(),this.withContext(s,function(){e.thenPart=this.Statement(),e.elsePart=this.match(ELSE,!0)?this.Statement():null}),e;case SWITCH:return e=this.newNode({cases:[],defaultIndex:-1}),e.discriminant=this.HeadExpression(),s=this.x.pushTarget(e).nest(),this.withContext(s,function(){for(this.mustMatch(LEFT_CURLY);(a=this.t.get())!==RIGHT_CURLY;){switch(a){case DEFAULT:e.defaultIndex>=0&&this.fail("More than one switch default");case CASE:n=this.newNode(),a===DEFAULT?e.defaultIndex=e.cases.length:n.caseLabel=this.Expression(COLON);break;default:this.fail("Invalid switch case")}for(this.mustMatch(COLON),n.statements=this.newNode(blockInit());(a=this.peek(!0))!==CASE&&a!==DEFAULT&&a!==RIGHT_CURLY;)n.statements.push(this.Statement());e.cases.push(n)}}),e;case FOR:return e=this.newNode(LOOP_INIT),e.blockComments=c,this.mustMatch(LEFT_PAREN),s=this.x.pushTarget(e).nest(),o=this.x.update({inForLoopInit:!0}),n=null,(a=this.peek(!0))!==SEMICOLON&&this.withContext(o,function(){a===VAR||a===CONST?(this.t.get(),n=this.Variables()):n=this.Expression()}),n&&this.match(IN)?(e.type=FOR_IN,this.withContext(o,function(){e.object=this.Expression(),n.type===VAR?(i=n.children,1!==i.length&&1!==n.destructurings.length&&this.fail("Invalid for..in left-hand side",this.filename,n.lineno),e.iterator=n.destructurings.length>0?n.destructurings[0]:i[0],e.varDecl=n):((n.type===ARRAY_INIT||n.type===OBJECT_INIT)&&(n.destructuredNames=this.checkDestructuring(n)),e.iterator=n)})):(o.inForLoopInit=!1,e.setup=n,this.mustMatch(SEMICOLON),this.withContext(o,function(){e.condition=this.peek(!0)===SEMICOLON?null:this.Expression(),this.mustMatch(SEMICOLON),r=this.peek(!0),e.update=r===RIGHT_PAREN?null:this.Expression()})),this.mustMatch(RIGHT_PAREN),this.withContext(s,function(){e.body=this.Statement()}),e;case WHILE:return e=this.newNode({isLoop:!0}),e.blockComments=c,e.condition=this.HeadExpression(),s=this.x.pushTarget(e).nest(),this.withContext(s,function(){e.body=this.Statement()}),e;case DO:return e=this.newNode({isLoop:!0}),e.blockComments=c,s=this.x.pushTarget(e).nest(),this.withContext(s,function(){e.body=this.Statement()}),this.mustMatch(WHILE),e.condition=this.HeadExpression(),this.match(SEMICOLON),e;case BREAK:case CONTINUE:e=this.newNode(),e.blockComments=c,s=this.x.pushTarget(e),this.peekOnSameLine()===IDENTIFIER&&(this.t.get(),e.label=this.t.token.value),e.target=e.label?s.labeledTargets.find(function(t){return t.labels.has(e.label)}):a===CONTINUE?s.defaultLoopTarget:s.defaultTarget,e.target||this.fail("Invalid "+(a===BREAK?"break":"continue")),e.target.isLoop||a!==CONTINUE||this.fail("Invalid continue");break;case TRY:for(e=this.newNode({catchClauses:[]}),e.blockComments=c,e.tryBlock=this.Block();this.match(CATCH);){switch(n=this.newNode(),this.mustMatch(LEFT_PAREN),this.t.get()){case LEFT_BRACKET:case LEFT_CURLY:this.t.unget(),n.varName=this.DestructuringExpression(!0);break;case IDENTIFIER:n.varName=this.t.token.value,this.checkValidIdentifierIfStrict("parameter",this.t.token.value);break;default:this.fail("missing identifier in catch")}this.mustMatch(RIGHT_PAREN),n.block=this.Block(),e.catchClauses.push(n)}return this.match(FINALLY)&&(e.finallyBlock=this.Block()),e.catchClauses.length||e.finallyBlock||this.fail("Invalid try statement"),e;case CATCH:case FINALLY:this.fail(Definitions.tokens[a]+" without preceding try");case THROW:e=this.newNode(),e.exception=this.Expression();break;case RETURN:e=this.Return();break;case WITH:return this.x.banWith()&&this.fail("with statements not allowed in strict code"),e=this.newNode(),e.blockComments=c,e.object=this.HeadExpression(),s=this.x.pushTarget(e).nest(),this.withContext(s,function(){e.body=this.Statement()}),e;case VAR:case CONST:e=this.Variables();break;case DEBUGGER:e=this.newNode();break;case NEWLINE:case SEMICOLON:return e=this.newNode({type:SEMICOLON}),e.blockComments=c,e.expression=null,e;case IDENTIFIER:if(a=this.peek(),a===COLON)return t=this.t.token.value,this.x.allLabels.has(t)&&this.fail("Duplicate label: "+t),this.t.get(),e=this.newNode({type:LABEL,label:t}),e.blockComments=c,s=this.x.pushLabel(t).nest(),this.withContext(s,function(){e.statement=this.Statement()}),e.target=e.statement.type===LABEL?e.statement.target:e.statement,e;default:e=this.newNode({type:SEMICOLON}),this.t.unget(),e.blockComments=c,e.expression=this.Expression(),e.end=e.expression.end}return e.blockComments=c,this.MagicalSemicolon(),e},Pp.Pragmas=function(){var t=[];do t.push(this.Pragma());while(this.match(COMMA));return this.MagicalSemicolon(),t},Pp.Pragma=function(){var t,e=[];do t=this.t.get(!0),e.push(this.t.token);while(isPragmaToken(this.peek()));return e},Pp.MagicalSemicolon=function(){var t;this.t.lineno===this.t.token.lineno&&(t=this.peekOnSameLine(),t!==END&&t!==NEWLINE&&t!==SEMICOLON&&t!==RIGHT_CURLY&&this.fail("missing ; before statement")),this.match(SEMICOLON)},Pp.Return=function(){var t=this.x.parentScript;this.x.inFunction||this.fail("Return not in function");var e=this.newNode({value:void 0}),n=this.peekOnSameLine(!0);return n!==END&&n!==NEWLINE&&n!==SEMICOLON&&n!==RIGHT_CURLY?(e.value=this.Expression(),t.hasReturnWithValue=!0):t.hasEmptyReturn=!0,e},Pp.ExplicitSpecifierSet=function(t){var e,n,i;if(e=this.newNode({type:OBJECT_INIT}),this.mustMatch(LEFT_CURLY),!this.match(RIGHT_CURLY))do i=this.Identifier(),this.match(COLON)?(n=this.newNode({type:PROPERTY_INIT}),n.push(i),n.push(t()),e.push(n)):e.push(i);while(!this.match(RIGHT_CURLY)&&this.mustMatch(COMMA));return e},Pp.Identifier=function(){return this.mustMatch(IDENTIFIER),this.newNode({type:IDENTIFIER})},Pp.IdentifierName=function(){return this.mustMatch(IDENTIFIER,!0),this.newNode({type:IDENTIFIER})},Pp.QualifiedPath=function(){var t,e;for(t=this.Identifier();this.match(DOT);){if(this.peek()!==IDENTIFIER){this.t.unget();break}e=this.newNode(),e.push(t),e.push(this.Identifier()),t=e}return t},Pp.FunctionDefinition=function(t,e,n,i){var r,s=this.newNode({params:[],paramComments:[]});"undefined"===typeof n&&(n=null),s.blockComments=n,s.type!==FUNCTION&&(s.type="get"===s.value?GETTER:SETTER),this.match(IDENTIFIER,!1,i)?(s.name=this.t.token.value,this.checkValidIdentifierIfStrict("function",s.name)):t&&this.fail("missing function identifier");var o=new StaticContext(null,null,s,this.x.strictMode);return this.withContext(o,function(){if(this.mustMatch(LEFT_PAREN),!this.match(RIGHT_PAREN)){do switch(r=this.t.get(),s.paramComments.push(this.t.lastBlockComment()),r){case LEFT_BRACKET:case LEFT_CURLY:this.t.unget(),s.params.push(this.DestructuringExpression());break;case IDENTIFIER:this.x.strictMode&&(this.checkValidIdentifierIfStrict("parameter",this.t.token.value),-1!==s.params.indexOf(this.t.token.value)&&this.fail("Cannot declare a parameter named '"+this.t.token.value+"' more than once in strict mode")),s.params.push(this.t.token.value);break;default:this.fail("missing formal parameter")}while(this.match(COMMA));this.mustMatch(RIGHT_PAREN)}r=this.t.get(!0),r!==LEFT_CURLY&&this.t.unget(),s.body=r!==LEFT_CURLY?this.AssignExpression():this.Script(s,!1,o.strictMode)}),r===LEFT_CURLY&&this.mustMatch(RIGHT_CURLY),s.end=this.t.token.end,s.functionForm=e,e===DECLARED_FORM&&this.x.parentScript.funDecls.push(s),s},Pp.Variables=function(){var t,e,n,i;switch(i=this.t.token.type){case VAR:case CONST:n=this.x.parentScript}t=this.newNode({type:i,destructurings:[]});do if(i=this.t.get(),i!==LEFT_BRACKET&&i!==LEFT_CURLY){if(i!==IDENTIFIER&&this.fail("missing variable name"),this.checkValidIdentifierIfStrict("variable",this.t.token.value),e=this.newNode({type:IDENTIFIER,name:this.t.token.value,readOnly:t.type===CONST}),t.push(e),n.varDecls.push(e),this.match(ASSIGN)){var r=this.t.lastBlockComment();this.t.token.assignOp&&this.fail("Invalid variable initialization"),e.initializer=this.AssignExpression()}else var r=this.t.lastBlockComment();e.blockComment=r}else{this.t.unget();var s=this.DestructuringExpression(!0);if(e=this.newNode({type:IDENTIFIER,name:s,readOnly:t.type===CONST}),t.push(e),pushDestructuringVarDecls(e.name.destructuredNames,n),t.destructurings.push({exp:s,decl:e}),this.x.inForLoopInit&&this.peek()===IN)continue;this.mustMatch(ASSIGN),this.t.token.assignOp&&this.fail("Invalid variable initialization"),e.blockComment=this.t.lastBlockComment(),e.initializer=this.AssignExpression()}while(this.match(COMMA));return t},Pp.checkDestructuring=function(t,e){if(t.type===ARRAY_COMP&&this.fail("Invalid array comprehension left-hand side"),t.type===ARRAY_INIT||t.type===OBJECT_INIT){for(var n,i,r,s,o={},a=t.children,c=0,u=a.length;c<u;c++)(n=a[c])&&(n.type===PROPERTY_INIT?(s=n.children,r=s[1],i=s[0].value):t.type===OBJECT_INIT?(r=n,i=n.value):(r=n,i=c),r.type===ARRAY_INIT||r.type===OBJECT_INIT?o[i]=this.checkDestructuring(r,e):(e&&r.type!==IDENTIFIER&&this.fail("missing name in pattern"),o[i]=r));return o}},Pp.DestructuringExpression=function(t){var e=this.PrimaryExpression();return e.destructuredNames=this.checkDestructuring(e,t),e},Pp.ComprehensionTail=function(){var t,e,n,i;t=this.newNode({type:COMP_TAIL});do{switch(e=this.newNode({type:FOR_IN,isLoop:!0}),this.mustMatch(LEFT_PAREN),this.t.get()){case LEFT_BRACKET:case LEFT_CURLY:this.t.unget(),e.iterator=this.DestructuringExpression();break;case IDENTIFIER:e.iterator=i=this.newNode({type:IDENTIFIER}),i.name=i.value,e.varDecl=n=this.newNode({type:VAR}),n.push(i),this.x.parentScript.varDecls.push(i);break;default:this.fail("missing identifier")}this.mustMatch(IN),e.object=this.Expression(),this.mustMatch(RIGHT_PAREN),t.push(e)}while(this.match(FOR));return this.match(IF)&&(t.guard=this.HeadExpression()),t},Pp.HeadExpression=function(){this.mustMatch(LEFT_PAREN);var t=this.ParenExpression();return this.mustMatch(RIGHT_PAREN),t},Pp.ParenExpression=function(){var t=this.x.update({inForLoopInit:this.x.inForLoopInit&&this.t.token.type===LEFT_PAREN}),e=this.withContext(t,function(){return this.Expression()});return e},Pp.Expression=function(){var t,e;if(t=this.AssignExpression(),this.match(COMMA)){e=this.newNode({type:COMMA}),e.push(t),t=e;do e=t.children[t.children.length-1],t.push(this.AssignExpression());while(this.match(COMMA))}return t},Pp.AssignExpression=function(){var t,e;if(e=this.ConditionalExpression(),!this.match(ASSIGN))return e;switch(t=this.newNode({type:ASSIGN}),t.blockComment=this.t.lastBlockComment(),e.type){case OBJECT_INIT:case ARRAY_INIT:e.destructuredNames=this.checkDestructuring(e);case IDENTIFIER:this.checkValidIdentifierIfStrict("variable",e.value);break;case DOT:case INDEX:case CALL:break;case NUMBER:case STRING:case TRUE:case FALSE:case NULL:throw this.t.newReferenceError("Bad left-hand side of assignment");
default:this.fail("Bad left-hand side of assignment")}return t.assignOp=e.assignOp=this.t.token.assignOp,t.push(e),t.push(this.AssignExpression()),t},Pp.ConditionalExpression=function(){var t,e;if(t=this.OrExpression(),this.match(HOOK)){e=t,t=this.newNode({type:HOOK}),t.push(e);var n=this.x.update({inForLoopInit:!1});this.withContext(n,function(){t.push(this.AssignExpression())}),this.match(COLON)||this.fail("missing : after ?"),t.push(this.AssignExpression())}return t},Pp.OrExpression=function(){var t,e;for(t=this.AndExpression();this.match(OR);)e=this.newNode(),e.push(t),e.push(this.AndExpression()),t=e;return t},Pp.AndExpression=function(){var t,e;for(t=this.BitwiseOrExpression();this.match(AND);)e=this.newNode(),e.push(t),e.push(this.BitwiseOrExpression()),t=e;return t},Pp.BitwiseOrExpression=function(){var t,e;for(t=this.BitwiseXorExpression();this.match(BITWISE_OR);)e=this.newNode(),e.push(t),e.push(this.BitwiseXorExpression()),t=e;return t},Pp.BitwiseXorExpression=function(){var t,e;for(t=this.BitwiseAndExpression();this.match(BITWISE_XOR);)e=this.newNode(),e.push(t),e.push(this.BitwiseAndExpression()),t=e;return t},Pp.BitwiseAndExpression=function(){var t,e;for(t=this.EqualityExpression();this.match(BITWISE_AND);)e=this.newNode(),e.push(t),e.push(this.EqualityExpression()),t=e;return t},Pp.EqualityExpression=function(){var t,e;for(t=this.RelationalExpression();this.match(EQ)||this.match(NE)||this.match(STRICT_EQ)||this.match(STRICT_NE);)e=this.newNode(),e.push(t),e.push(this.RelationalExpression()),t=e;return t},Pp.RelationalExpression=function(){var t,e;for(t=this.ShiftExpression();this.match(LT)||this.match(LE)||this.match(GE)||this.match(GT)||!this.x.inForLoopInit&&this.match(IN)||this.match(INSTANCEOF);)e=this.newNode(),e.push(t),e.push(this.ShiftExpression()),t=e;return t},Pp.ShiftExpression=function(){var t,e,n=this.x.update({inForLoopInit:!1});return this.withContext(n,function(){for(t=this.AddExpression();this.match(LSH)||this.match(RSH)||this.match(URSH);)e=this.newNode(),e.push(t),e.push(this.AddExpression()),t=e}),t},Pp.AddExpression=function(){var t,e;for(t=this.MultiplyExpression();this.match(PLUS)||this.match(MINUS);)e=this.newNode(),e.push(t),e.push(this.MultiplyExpression()),t=e;return t},Pp.MultiplyExpression=function(){var t,e;for(t=this.UnaryExpression();this.match(MUL)||this.match(DIV)||this.match(MOD);)e=this.newNode(),e.push(t),e.push(this.UnaryExpression()),t=e;return t},Pp.UnaryExpression=function(){var t,e,n;switch(n=this.t.get(!0)){case DELETE:case VOID:case TYPEOF:case NOT:case BITWISE_NOT:case PLUS:case MINUS:t=n===PLUS?this.newNode({type:UNARY_PLUS}):n===MINUS?this.newNode({type:UNARY_MINUS}):this.newNode(),e=this.UnaryExpression(),t.push(e),n===DELETE&&this.x.strictMode&&e.type!==DOT&&e.type!==INDEX&&this.fail("Cannot delete unqualified property '"+e.value+"' in strict mode");break;case INCREMENT:case DECREMENT:t=this.newNode(),t.push(this.MemberExpression(!0)),this.checkValidIdentifierIfStrict("variable",t.children[0].value);break;default:this.t.unget(),t=this.MemberExpression(!0),this.t.tokens[3&this.t.tokenIndex+this.t.lookahead-1].lineno===this.t.lineno&&(this.match(INCREMENT)||this.match(DECREMENT))&&(this.checkValidIdentifierIfStrict("variable",t.value),e=this.newNode({postfix:!0}),e.push(t),t=e)}return t},Pp.MemberExpression=function(t){var e,n,i;for(this.match(NEW)?(e=this.newNode(),e.push(this.MemberExpression(!1)),this.match(LEFT_PAREN)&&(e.type=NEW_WITH_ARGS,e.push(this.ArgumentList()))):e=this.PrimaryExpression();(i=this.t.get())!==END;){switch(i){case DOT:n=this.newNode(),n.push(e),n.push(this.IdentifierName());break;case LEFT_BRACKET:n=this.newNode({type:INDEX}),n.push(e),n.push(this.Expression()),this.mustMatch(RIGHT_BRACKET);break;case LEFT_PAREN:if(t){n=this.newNode({type:CALL}),n.push(e),n.push(this.ArgumentList());break}default:return this.t.unget(),e}e=n}return e},Pp.ArgumentList=function(){var t,e;if(t=this.newNode({type:LIST}),this.match(RIGHT_PAREN,!0))return t;do e=this.AssignExpression(),t.push(e);while(this.match(COMMA));return this.mustMatch(RIGHT_PAREN),t},Pp.PrimaryExpression=function(){var t,e,n=this.t.get(!0);switch(n){case FUNCTION:t=this.FunctionDefinition(!1,EXPRESSED_FORM);break;case LEFT_BRACKET:for(t=this.newNode({type:ARRAY_INIT});(n=this.peek(!0))!==RIGHT_BRACKET;)if(n!==COMMA){if(t.push(this.AssignExpression()),n!==COMMA&&!this.match(COMMA))break}else this.t.get(),t.push(null);1===t.children.length&&this.match(FOR)&&(e=this.newNode({type:ARRAY_COMP,expression:t.children[0],tail:this.ComprehensionTail()}),t=e),this.mustMatch(RIGHT_BRACKET);break;case LEFT_CURLY:var i,r={};t=this.newNode({type:OBJECT_INIT});t:if(!this.match(RIGHT_CURLY)){do{n=this.t.get();var s=this.t.token.value;if("get"!==s&&"set"!==s||this.peek(!1,!0)!==IDENTIFIER){var o=this.t.blockComments;switch(n){case IDENTIFIER:case NUMBER:case STRING:i=this.newNode({type:IDENTIFIER});break;case RIGHT_CURLY:break t;default:if(Definitions.keywords.hasOwnProperty(this.t.token.value)){i=this.newNode({type:IDENTIFIER});break}this.fail("Invalid property name")}this.match(COLON)?(e=this.newNode({type:PROPERTY_INIT}),e.push(i),e.push(this.AssignExpression()),e.blockComments=o,2&r[i.value]&&this.fail("cannot create object with 'get "+i.value+"' and '"+i.value+"'"),4&r[i.value]&&this.fail("cannot create object with 'set "+i.value+"' and '"+i.value+"'"),this.x.strictMode&&1&r[i.value]&&this.fail("cannot create object with multiple '"+i.value+"' values"),r[i.value]=1|(r[i.value]||0),t.push(e)):(this.peek()!==COMMA&&this.peek()!==RIGHT_CURLY&&this.fail("missing : after property"),t.push(i))}else{var a=this.FunctionDefinition(!0,EXPRESSED_FORM,null,!0);1&r[a.name]&&this.fail("cannot create object with '"+a.name+"' and '"+s+" "+a.name+"'"),r[a.name]&("get"===s?2:4)&&this.fail("cannot create object with multiple '"+s+" "+a.name+"' values"),r[a.name]=(r[a.name]||0)|("get"===s?2:4),t.push(a)}}while(this.match(COMMA));this.mustMatch(RIGHT_CURLY)}break;case LEFT_PAREN:t=this.ParenExpression(),this.mustMatch(RIGHT_PAREN),t.parenthesized=!0;break;case NULL:case THIS:case TRUE:case FALSE:case IDENTIFIER:case NUMBER:case STRING:case REGEXP:t=this.newNode();break;default:this.fail("missing operand; found "+Definitions.tokens[n])}return t};var exports={};return exports.parse=parse,exports.parseFunction=parseFunction,exports.Node=Node,exports.DECLARED_FORM=DECLARED_FORM,exports.EXPRESSED_FORM=EXPRESSED_FORM,exports.STATEMENT_FORM=STATEMENT_FORM,exports.Tokenizer=Tokenizer,exports.Parser=Parser,exports}(),Tailspin.Decompiler=function(){"use strict";function t(t,e){for(var n="",i=!0,r=0,s=e.length;r<s;r++){if(i)for(var o=0;o<t;o++)n+=" ";n+=e[r],i="\n"===e[r]}return n}function e(t){return t&&t.type===BLOCK}function n(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/</g,"\\u003C").replace(/>/g,"\\u003E")}function i(t){if(/[\u0000-\u001F\u0080-\uFFFF]/.test(t.value)){for(var e="",i=0;i<t.value.length;i++){var r=t.value[i];if(r<=""||r>=""){for(var s=r.charCodeAt(0).toString(16);s.length<4;)s="0"+s;e+="\\u"+s}else e+=n(r)}return'"'+e+'"'}return'"'+n(t.value)+'"'}function r(n,o){var a=!1;if(!n)return"";if(!(n instanceof Object))return n;o||(a=!0,o=1);var c="";switch(n.parenthesized&&(c+="("),n.type){case FUNCTION:case GETTER:case SETTER:c+=n.type===FUNCTION?"function":n.type===GETTER?"get":"set",c+=(n.name?" "+n.name:"")+"(";for(var u=0,h=n.params.length;u<h;u++)c+=(u>0?", ":"")+r(n.params[u],o);c+=") "+r(n.body,o);break;case SCRIPT:case BLOCK:var l=n.children;if(a){for(var u=0,h=l.length;u<h;u++){u>0&&(c+="\n"),c+=r(l[u],o);var p=c[c.length-1];";"!=p&&(c+=";")}break}c+="{",void 0!==n.id&&(c+=" /* "+n.id+" */"),c+="\n";for(var u=0,h=l.length;u<h;u++){u>0&&(c+="\n"),c+=t(4,r(l[u],o));var p=c[c.length-1];";"!=p&&(c+=";")}c+="\n}";break;case IF:c+="if ("+r(n.condition,o)+") ";var f=n.thenPart,E=n.elsePart,d=e(f)||e(E);d||(c+="{\n"),c+=(d?r(f,o):t(4,r(f,o)))+"\n",E&&(c+=d?" else ":"} else {\n",c+=(d?r(E,o):t(4,r(E,o)))+"\n"),d||(c+="}");break;case SWITCH:c+="switch ("+r(n.discriminant,o)+") {\n";for(var u=0,h=n.cases.length;u<h;u++){var I=n.cases[u];c+=I.type===CASE?"  case "+r(I.caseLabel,o)+":\n":"  default:\n";var v=r(I.statements,o);c+=v.slice(2,v.length-2)+"\n"}c+="}";break;case FOR:c+="for ("+r(n.setup,o)+"; "+r(n.condition,o)+"; "+r(n.update,o)+") ";var N=r(n.body,o);e(n.body)?n.body&&(c+=N):c+="{\n"+t(4,N)+";\n}";break;case WHILE:c+="while ("+r(n.condition,o)+") ";var N=r(n.body,o);c+=e(n.body)?N:"{\n"+t(4,N)+";\n}";break;case FOR_IN:var T=n.varDecl;c+="for (",c+=(T?r(T,o):r(n.iterator,o))+" in "+r(n.object,o)+") ";var N=r(n.body,o);e(n.body)?n.body&&(c+=N):c+="{\n"+t(4,N)+";\n}";break;case DO:c+="do "+r(n.body,o),c+=" while ("+r(n.condition,o)+");";break;case BREAK:c+="break"+(n.label?" "+n.label:"")+";";break;case CONTINUE:c+="continue"+(n.label?" "+n.label:"")+";";break;case TRY:c+="try ",c+=r(n.tryBlock,o);for(var u=0,h=n.catchClauses.length;u<h;u++){var m=n.catchClauses[u];c+=" catch ("+r(m.varName,o)+(m.guard?" if "+r(m.guard,o):"")+") ",c+=r(m.block,o)}n.finallyBlock&&(c+=" finally ",c+=r(n.finallyBlock,o));break;case THROW:c+="throw "+r(n.exception,o);break;case RETURN:c+="return",n.value&&(c+=" "+r(n.value,o));break;case WITH:c+="with ("+r(n.object,o)+") ",c+=r(n.body,o);break;case VAR:case CONST:var l=n.children;c+=s[n.type]+" ";for(var u=0,h=l.length;u<h;u++){u>0&&(c+=", ");var T=l[u];c+=r(T.name,o),T.initializer&&(c+=" = "+r(T.initializer,o))}break;case DEBUGGER:c+="debugger NYI\n";break;case SEMICOLON:n.expression&&(c+=r(n.expression,o)+";");break;case LABEL:c+=n.label+":\n"+r(n.statement,o);break;case COMMA:case LIST:for(var l=n.children,u=0,h=l.length;u<h;u++)u>0&&(c+=", "),c+=r(l[u],o);break;case ASSIGN:var l=n.children,m=n.assignOp;c+=r(l[0],o)+" "+(m?s[m]:"")+"="+" "+r(l[1],o);break;case HOOK:var l=n.children;c+="("+r(l[0],o)+" ? "+r(l[1],o)+" : "+r(l[2],o),c+=")";break;case OR:case AND:var l=n.children;c+="("+r(l[0],o)+" "+s[n.type]+" "+r(l[1],o),c+=")";break;case BITWISE_OR:case BITWISE_XOR:case BITWISE_AND:case EQ:case NE:case STRICT_EQ:case STRICT_NE:case LT:case LE:case GE:case GT:case IN:case INSTANCEOF:case LSH:case RSH:case URSH:case PLUS:case MINUS:case MUL:case DIV:case MOD:var l=n.children;c+="("+r(l[0],o)+" "+s[n.type]+" "+r(l[1],o)+")";break;case DELETE:case VOID:case TYPEOF:c+=s[n.type]+" "+r(n.children[0],o);break;case NOT:case BITWISE_NOT:c+=s[n.type]+r(n.children[0],o);break;case UNARY_PLUS:c+="+"+r(n.children[0],o);break;case UNARY_MINUS:c+="-"+r(n.children[0],o);break;case INCREMENT:case DECREMENT:c+=n.postfix?r(n.children[0],o)+s[n.type]:s[n.type]+r(n.children[0],o);break;case DOT:var l=n.children;c+=r(l[0],o)+"."+r(l[1],o);break;case INDEX:var l=n.children;c+=r(l[0],o)+"["+r(l[1],o)+"]";break;case CALL:var l=n.children;c+=r(l[0],o)+"("+r(l[1],o)+")";break;case NEW:case NEW_WITH_ARGS:var l=n.children;c+="new "+r(l[0],o),l[1]&&(c+="("+r(l[1],o)+")");break;case ARRAY_INIT:c+="[";for(var l=n.children,u=0,h=l.length;u<h;u++)l[u]&&(c+=r(l[u],o)),c+=",";c+="]";break;case ARRAY_COMP:c+="["+r(n.expression,o)+" ",c+=r(n.tail,o),c+="]";break;case COMP_TAIL:for(var l=n.children,u=0,h=l.length;u<h;u++)u>0&&(c+=" "),c+=r(l[u],o);n.guard&&(c+=" if ("+r(n.guard,o)+")");break;case OBJECT_INIT:var l=n.children;c+=l[0]&&l[0].type===PROPERTY_INIT?"{\n":"{";for(var u=0,h=l.length;u<h;u++){u>0&&(c+=",\n");var m=l[u];if(m.type===PROPERTY_INIT){var y,R=m.children,b=R[0].value;y="string"!==typeof b||Tailspin.Lexer.isIdentifier(b)?r(R[0],o):i(R[0]),c+=t(4,y)+": "+t(4,r(R[1],o)).substring(4)}else c+=t(4,r(m,o))}c+="\n}";break;case NULL:c+="null";break;case THIS:c+="this";break;case TRUE:c+="true";break;case FALSE:c+="false";break;case IDENTIFIER:case NUMBER:case REGEXP:c+=n.value;break;case STRING:c+=i(n);break;case GROUP:c+="("+r(n.children[0],o)+")";break;default:throw"PANIC: unknown operation "+s[n.type]+" "+n.toSource()}return n.parenthesized&&(c+=")"),c}var s=Tailspin.Definitions.tokens,o={};return o.pp=r,o}(),Tailspin.Sandbox=function(t){"use strict";function e(t,e,n){var i=B.indexOf(t.constructor);if(i>=0&&0===i%2){var r=new B[i+1](t.message);return"string"===typeof e&&"number"===typeof n&&(r.sourceFile=e,r.sourceLine=n),r}return t}function n(t){return y.apply(y.Array.prototype.slice,t)}function i(t,e,n){var i=new y.TypeError(t);return i.sourceLine=n,i.sourceFile=e,i}function r(t,e,n){var i=new y.ReferenceError(t);return i.sourceLine=n,i.sourceFile=e,i}function s(){for(var t=Object.getOwnPropertyNames(V),e=0,n=t.length;e<n;e++)delete V[t[e]];var t=Object.getOwnPropertyNames(w);for(e=0,n=t.length;e<n;e++){var i=t[e],r=w[i];V[i]=r,Object.defineProperty(V,i,Object.getOwnPropertyDescriptor(w,i))}}function o(t){var e=t.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return 1!=e.length||e[0]?e:[]}function a(t,e){if(e="number"===typeof e?e:0,"function"===typeof t){var n=t,i=o(n);"$ret"===i[0]&&"$prev"===i[1]&&b.set(n,{call:function(t,e,n,i,r,s,o,a,c,u){for(var h=[r,u],l=0,p=n.length;l<p;l++)h[l+2]=n[l];t.apply(e,h)},construct:function(){}})}else if("object"===typeof t&&e<1){var r={};for(var s in t)R(s)&&(r[s]=a(t[s],e+1));t=r}return t}function c(t){var e=typeof t;return"object"===e?null===t:"function"!==e}function u(t){var e=typeof t;return"object"===e?null!==t:"function"===e}function h(t,e,n){if(void 0===t||null===t){var r="'"+JSON.stringify(t)+"' is not an object (evaluating "+e+")";throw n?i(r,n.filename,n.lineno):i(r)}}function l(t,e,n){return h(t,e,n),p(t)}function p(t){switch(typeof t){case"boolean":return new V.Boolean(t);case"number":return new V.Number(t);case"string":return new V.String(t);default:return t}}function f(t,e){this.node=t,this.scope=e,this.length=t?t.params.length:0}function E(t,e){for(var n=new f(t,e.scope),i=n.length>0?"a0":"",r=1;r<n.length;r++)i+=",a"+r;var s="(function("+i+"){\n        if (arguments[arguments.length-1] !== continuationMarker) {\n            var t = (this === nativeBase? undefined : this);\n            return fint.call(newFn, t, arguments, x);\n        }})",o=y.newFnFunction(K,n,e,s);return b.set(o,n),o}function d(t,e){if(c(e))return!1;var n=t.prototype;if(c(n))throw new y.TypeError("'prototype' property is not an object.",this.node.filename,this.node.lineno);for(var i;i=Object.getPrototypeOf(e);){if(i===n)return!0;e=i}return!1}function I(t,n,i,r,s,o,a,c,u){var h=b.get(t);if(h)h.construct(t,n,i,r,s,o,a,c,u);else try{var l=y.applyNew(t,n);r(l,u)}catch(p){c(e(p),u)}}function v(t,n,i,r,s,o,a,c,u,h,l){var p=b.get(t);if(p)p.call(t,n,i,r,s,o,a,c,u,h,l);else try{for(var f=[],E=0,d=i.length;E<d;E++)f[E]=i[E];var I=y.apply(t,n,f);s(I,h)}catch(v){u(e(v),h)}}function N(t,e,n){if(t){for(var i=t.params.map(function(e){return"arguments"===e?"_"+t.params.join("_"):e}),r=i.join(", "),s=i.map(function(t){return"{get:function(){return "+t+";}, set:function(v){return "+t+" = v;}, configurable:false}"}).join(", "),o="(function("+r+"){\n"+"return {args:arguments, accessors:["+s+"]};\n            })",a=y.eval(o).apply(null,e),c={},u=t.params.length-1;u>=0;u--)Object.prototype.hasOwnProperty.call(this,t.params[u])||(t.body.strict?e.length>u&&Object.defineProperty(this,t.params[u],{value:e[u],writable:!0,enumerable:!1,configurable:!0}):(Object.defineProperty(this,t.params[u],a.accessors[u]),c[t.params[u]]=!0));c.arguments||(Object.defineProperty(this,"arguments",{value:a.args,writable:!0,enumerable:!1,configurable:!1}),t.body.strict?(Object.defineProperty(a.args,"callee",{get:X,set:X,enumerable:!1,configurable:!1}),Object.defineProperty(a.args,"caller",{get:X,set:X,enumerable:!1,configurable:!1})):Object.defineProperty(a.args,"callee",{value:n,writable:!0,enumerable:!1,configurable:!0}))}}function T(t,e){this.type=t,this.strict=!!e,this.stack=[]}var m,y,R=Tailspin.Utility.hasDirectProperty,b={get:function(t){return t.__tailspin_internal__},set:function(t,e){return Object.defineProperty(t,"__tailspin_internal__",{value:e,configurable:!0,enumerable:!1,writable:!0})},has:function(t){return R(t,"__tailspin_internal__")}},O='nativeBase = (new Function("return this"))();\n\n// Creates a function in the sandbox from the string fnStr.\n// fnStr will reference continuationMarker, fint and x.\nnewFnFunction = function(continuationMarker, fint, x, fnStr) {\n    var newFn;\n    if (fint.node.body.strict) {\n        (function() {\n            "use strict"\n            newFn = eval(fnStr);\n        })();\n    }\n    else {\n        newFn = eval(fnStr);\n    }\n    return newFn;\n};\n\n// Creates an empty arguments object.\nmakeArguments = function() {\n    return (function(){return arguments})();\n};\n\n// Apply functions used in order to run functions in the sandbox.\napplyNew = function(f, a) {\n    return new (f.bind.apply(f, [,].concat(Array.prototype.slice.call(a))))();\n};\n\napply = function(f, t, a) {\n    return f.apply(t, a);\n};';if("object"===typeof document){var g=document.createElement("iframe");g.style.display="none",document.body.appendChild(g),g.contentWindow.document.write('<script type="text/javascript">'+O+"</scr"+"ipt>"),m=new Function("return this")(),y=g.contentWindow}else{var S=eval;S(O),m=new Function("return this")(),y=m}var w={NaN:y.NaN,Infinity:y.Infinity,undefined:y.undefined,eval:y.eval,Function:y.Function,Array:y.Array,Boolean:y.Boolean,Date:y.Date,Number:y.Number,Object:y.Object,RegExp:y.RegExp,String:y.String,Error:y.Error,EvalError:y.EvalError,RangeError:y.RangeError,ReferenceError:y.ReferenceError,SyntaxError:y.SyntaxError,TypeError:y.TypeError,URIError:y.URIError,escape:y.escape,unescape:y.unescape,parseInt:y.parseInt,parseFloat:y.parseFloat,isNaN:y.isNaN,isFinite:y.isFinite,encodeURI:y.encodeURI,decodeURI:y.decodeURI,encodeURIComponent:y.encodeURIComponent,decodeURIComponent:y.decodeURIComponent,Math:y.Math,JSON:y.JSON};b.set(y.eval,{call:function(e,n,i,r,s,o,a,c,u,h,l){if("string"!==typeof i[0])return i[0];var f=l&&l.indirectEval,E=f?!1:r.strict,d=Tailspin.Parser.parse(i[0],null,null,E,y),I=t.createEvalExecutionContext(E),v=d.strict;I.thisObject=f?V:v?n:null===n||void 0===n?V:p(n),I.functionInstance=this,I.control=r.control,I.asynchronous=r.asynchronous,I.scope=f?{object:V,parent:null}:r.scope,v&&(I.scope={object:new Object,parent:I.scope}),I.execute(d,function(t,e){s(I.result,e)},null,null,null,u,h)},construct:function(){}}),b.set(y.Function,{call:function(t,e,n,i,r,s,o,a,c,u){this.construct(t,n,i,r,s,o,a,c,u)},construct:function(t,e,n,i,r,s,o,a,c){var u="",h="",l=e.length;if(l){var p=l-1;if(p){u+=e[0];for(var f=1;f<p;f++)u+=","+e[f]}h+=e[p]}var t=Tailspin.Parser.parseFunction("anonymous("+u+") {"+h+"}",!1,Tailspin.Parser.STATEMENT_FORM,null,null,y),d={};d.scope={object:V,parent:null},d.stack=[],i(E(t,d),c)}});var C=y.Function.prototype.toString,L=function(){var t=b.get(this);return t?t.toString():C.call(this)};L.prototype=void 0,Object.defineProperty(y.Function.prototype,"toString",{value:L,enumerable:!1,writable:!0}),b.set(y.Function.prototype.call,{call:function(t,e,n,i,r,s,o,a,c,u){var h=b.get(e);if(h)if("function"!==typeof e)c(new y.TypeError("Call must be called on a function."));else{var l=h.node&&h.node.body.strict?n[0]:p(n[0]),f=Array.prototype.splice.call(n,1);h.call(e,l,f,i,r,s,o,a,c,u,{callViaFunctionApply:!0})}else r(y.apply(y.Function.prototype.call,e,n),u)},construct:function(){}}),b.set(y.Function.prototype.apply,{call:function(t,e,n,i,r,s,o,a,c,h){var l=b.get(e);if(l)if("function"!==typeof e)c(new y.TypeError("Apply must be called on a function."));else{var f=l.node&&l.node.body.strict?n[0]:p(n[0]),E=n[1];if(null===E||void 0===E)E=[];else if(!u(E))return c(new y.TypeError("Apply arguments must be an object.")),void 0;l.call(e,f,E,i,r,s,o,a,c,h,{callViaFunctionApply:!0})}else r(y.apply(y.Function.prototype.apply,e,n),h)},construct:function(){}}),b.set(y.Function.prototype.bind,{call:function(t,e,n,i,r,s,o,a,c,u){var h=b.get(e);if(h)if("function"!==typeof e)c(new y.TypeError("Bind must be called on a function."));else{var l=y.Function.prototype.bind.apply(e,n),p=new f;b.set(l,p);var E=n.slice(1),d=n[0];p.call=function(t,e,n,i,r,s,o,a,c,u){e=d,n=n instanceof Array?E.concat(n):E,h.call(t,e,n,i,r,s,o,a,c,u,{callViaFunctionApply:!0})},p.construct=function(t,e,n,i,r,s,o,a,c){e=e instanceof Array?E.concat(e):E,h.construct(t,e,n,i,r,s,o,a,c)},r(l,u)}else r(y.apply(y.Function.prototype.bind,e,n),u)},construct:function(){}});var x=y.Array.prototype.pop,k=y.Array.prototype.push,A=y.Array.prototype.shift,P=y.Array.prototype.unshift,_=y.Array.prototype.splice,F=y.Array.prototype.reverse,D=y.Array.prototype.sort;b.set(k,{call:function(t,e,n,i,r,s,o,a,c,u){var h=e.length,l=function(){y.apply(_,e,[h,n.length]),u()};r(y.apply(k,e,n),l)},construct:function(){}}),b.set(x,{call:function(t,e,n,i,r,s,o,a,c,u){var h=e.length,l=y.apply(x,e,n),p=u;e.length!==h&&(p=function(){y.apply(k,e,[l]),u()}),r(l,p)},construct:function(){}}),b.set(A,{call:function(t,e,n,i,r,s,o,a,c,u){var h=e.length,l=y.apply(A,e,n),p=u;e.length!==h&&(p=function(){y.apply(P,e,[l]),u()}),r(l,p)},construct:function(){}}),b.set(P,{call:function(t,e,n,i,r,s,o,a,c,u){var h=function(){y.apply(_,e,[0,n.length]),u()};r(y.apply(P,e,n),h)},construct:function(){}}),b.set(_,{call:function(t,e,n,i,r,s,o,a,c,u){var h;if(u){var l=y.Array.prototype.slice.apply(e);h=function(){var t=l.length;e.length=t;for(var n=0;n<t;n++)e[n]=l[n];u()}}r(y.apply(_,e,n),h)},construct:function(){}}),b.set(F,{call:function(t,e,n,i,r,s,o,a,c,u){var h=function(){y.apply(F,e),u()};r(y.apply(F,e),h)},construct:function(){}}),b.set(D,{call:function(t,e,n,i,r,s,o,a,c,u){var h;if(u){var l=y.Array.prototype.slice.apply(e);h=function(){var t=l.length;e.length=t;for(var n=0;n<t;n++)e[n]=l[n];u()}}r(y.apply(D,e,n),h)},construct:function(){}});var M=4294967296,U=Math.random()*M;b.set(y.Math.random,{call:function(t,e,n,i,r,s,o,a,c,u){var h=U;U=(1664525*U+1013904223)%M;var l=U/M,p=function(){U=h,u()};r(l,p)},construct:function(){}});for(var B=[Error,y.Error,EvalError,y.EvalError,RangeError,y.RangeError,ReferenceError,y.ReferenceError,SyntaxError,y.SyntaxError,TypeError,y.TypeError,URIError,y.URIError],j=Object.getOwnPropertyNames(w),H=0,G=j.length;H<G;H++){var W=j[H],Y=Object.getOwnPropertyDescriptor(m,j[H]);Object.defineProperty(w,W,{configurable:Y.configurable,enumerable:Y.enumerable,writable:Y.writable})}var V=new y.Object;s();var K={},X=y.eval("'use strict'; Object.getOwnPropertyDescriptor(function() {}, 'caller').get");N.prototype=Object.create(null),f.prototype={call:function(e,n,i,r,s,o,a,c,u,h,l){var f=this.node,E=t.createFunctionExecutionContext(f.body.strict);if(E.thisObject=E.strict&&l&&l.callViaFunctionApply?n:E.strict?n!==V?n:void 0:p(n)||V,E.functionInstance=this,E.control=r.control,E.asynchronous=r.asynchronous,E.stack=r.stack.slice(),E.stack.push({node:r.currentNode,executionContext:r}),E.scope={object:new N(f,i,e),parent:this.scope},!s){var d,I=!1,v=!1;if(E.asynchronous=!1,delete E.control,E.execute(f.body,function(){},function(){I=!0},a,c,function(t){v=!0,d=t}),v)throw d;return I?E.result:void 0}E.execute(f.body,function(t,e){s(void 0,e)},s,a,c,u,h)},construct:function(t,e,n,i,r,s,o,a,c){var u=y.applyNew(t,[K]);this.call(t,u,e,n,function(t,e){"object"===typeof t||"function"===typeof t?i(t,e):i(u,e)},r,s,o,a,c)},toString:function(){var t=this.node.parenthesized;this.node.parenthesized=!1;var e=Tailspin.Decompiler.pp(this.node);return this.node.parenthesized=t,e}},T.prototype={scope:{object:V,parent:null},thisObject:V,functionInstance:null,result:void 0,target:null,control:null,asynchronous:!1,execute:function(e,n,i,r,s,o,a){t.execute(e,this,n,i,r,s,o,a)},newFunction:function(t){return E(t,this)},copy:function(){var t=new T(this.type,this.strict);return t.scope=this.scope,t.thisObject=this.thisObject,t.functionInstance=this.functionInstance,t.result=this.result,t.target=this.target,t.control=this.control,t.asynchronous=this.asynchronous,t.stack=this.stack.slice(),t},lookupInScope:function(t){for(var e=this.scope;e;e=e.parent)if(t in e.object)return e.object[t];return void 0}};var z={};return z.global=V,z.globalBase=w,z.functionInternals=b,z.translate=a,z.resetEnvironment=s,z.sandbox=y,z.sandboxError=e,z.sandboxArray=n,z.newTypeError=i,z.newReferenceError=r,z.isPrimitive=c,z.isObject=u,z.checkObjectCoercible=h,z.toObjectCheck=l,z.toObject=p,z.Activation=N,z.newFunction=E,z.hasInstance=d,z.constructFunction=I,z.callFunction=v,z.ExecutionContext=T,z},Tailspin.Interpreter=function(){"use strict";function t(t,e,n){this.base=t,this.propertyName=e,this.node=n}function e(e,n,i){return e instanceof t?e.base?!0:(n(C(e.propertyName+" is not defined",e.node.filename,e.node.lineno),i),!1):(n(C(e.propertyName+" is not a reference",e.node.filename,e.node.lineno),i),!1)}function n(t,e,i){var r=i;if(i){var s=B(t,e),o=t[e];if(s)r=function(){t[e]=o,i()};else if("length"!==e&&B(t,"length")){var a=n(t,"length",i);r=function(){delete t[e],a()}}else r=function(){delete t[e],i()}}return r}function i(t,e,i){var r=i;return i&&t.hasOwnProperty(e)&&(r=n(t,e,i),delete t[e]),r}function r(e,n,i,r,s){if(n instanceof t){if(null===n.base||void 0===n.base)return r(C(n.propertyName+" is not defined",n.node.filename,n.node.lineno),s),void 0;if("function"===typeof n.base&&"caller"===n.propertyName)n.base.caller,i(void 0,s,n);else{var o=P(n.base),a=Tailspin.Utility.getPropertyDescriptor(o,n.propertyName);if(a&&a.get){var c=function(t,e){i(t,e,n)};U(a.get,n.base,[],e,c,null,null,null,r,s)}else{var u;u=e.strict?o[n.propertyName]:nonStrictGetValue(o,n.propertyName),i(u,s,n)}}}else i(n,s,n)}function s(e,i,r,s,o,a,c,u){if(i instanceof t){var h=P(i.base)||b,l=Tailspin.Utility.getPropertyDescriptor(h,i.propertyName);if(l&&l.set)U(l.set,h,[r],e,a,null,null,null,c,u);else{var p,f=n(h,i.propertyName,u);p=o?h[i.propertyName]=r:nonStrictPutValue(h,i.propertyName,r),a(p,f)}}else c(C("Invalid assignment left-hand side",s.filename,s.lineno),u)}function o(t,e,n,i,s,o,a,c){u(t,e,function(t,i){r(e,t,n,a,i)},function(t,n){r(e,t,i,a,n)},s,o,a,c)}function a(t){return function(e,n,i,r,s,a,c,u){var h=e.children;o(h[0],n,function(e,u){o(h[1],n,function(n,r){i(t(e,n),r)},r,s,a,c,u)},r,s,a,c,u)}}function c(t){return function(e,n,i,r,s,a,c,u){o(e.children[0],n,function(e,n){i(t(e),n)},r,s,a,c,u)}}function u(t,e,n,r,s,o,a,c){var u=function(i){try{var c=H[t.type];c?c(t,e,n,r,s,o,a,i):a("Not implemented: "+I.tokens[t.type],i)}catch(u){a(g(u,t.filename,t.lineno),i)}};if(e.asynchronous){var h=u;u=function(t){j++,j>200?(j=0,setTimeout(function(){h(t)},0)):h(t)}}var l=i(e,"returnedValue",c);e.currentNode=t,e.control?e.control(t,e,u,l):u(l)}function h(t,e){return function(){return O.get(t).call(t,this,arguments,e)}}function l(t,e,n,i,r,s){p(t,e,n,f(),i,r,s)}function p(t,e,n,i,r,s,o){if("string"!==typeof t)return t;try{var a=Tailspin.Parser.parse(t,e,n,!1,R);i.strict=!!a.strict,i.execute(a,function(t,e){r(i.result,e)},r,null,null,s,o)}catch(c){s(g(c),o)}}function f(){return new L(v)}function E(t){return new L(N,t)}function d(t){return new L(T,t)}var I=Tailspin.Definitions,v=0,N=1,T=2,m={},y=new Tailspin.Sandbox(m),R=y.sandbox,b=y.global,O=y.functionInternals,g=y.sandboxError,S=y.sandboxArray,w=y.newTypeError,C=y.newReferenceError,L=y.ExecutionContext;y.isPrimitive;var x=y.isObject,k=y.checkObjectCoercible,A=y.toObjectCheck,P=y.toObject,_=y.Activation,F=y.newFunction,D=y.hasInstance,M=y.constructFunction,U=y.callFunction,B=Tailspin.Utility.hasDirectProperty;t.prototype.toString=function(){return Tailspin.Decompiler.pp(this.node)};var j=0,H=[];return H[FUNCTION]=function(t,e,n,i,r,s,o,a){var c;if(t.functionForm!==Tailspin.Parser.DECLARED_FORM)if(t.name&&t.functionForm!==Tailspin.Parser.STATEMENT_FORM){var u=new R.Object;e.scope={object:u,parent:e.scope};try{c=F(t,e),Object.defineProperty(u,t.name,{value:c,writable:!1,configurable:!1,enumerable:!0})}finally{e.scope=e.scope.parent}}else c=F(t,e),t.functionForm===Tailspin.Parser.STATEMENT_FORM&&Object.defineProperty(e.scope.object,t.name,{value:c,writable:!0,configurable:!1,enumerable:!0});n(c,a)},H[SCRIPT]=function(t,e,n,i,r,s,o,a){for(var c=function(t,e,n){var i=n;return n&&(i=function(){delete t[e],n()}),i},u=e.scope.object,h=t.funDecls,l=0,p=h.length;l<p;l++){var f=h[l].name,E=F(h[l],e),d=a||e.type===N;B(u,f)?u[f]=E:Object.defineProperty(u,f,{value:E,configurable:d,writable:!0}),a=c(u,f,a)}for(var I=t.varDecls,l=0,p=I.length;l<p;l++){var v=I[l],f=v.name;if(v.readOnly&&B(u,f))return o(w("Redeclaration of const "+f,v.filename,v.lineno),a),void 0;if(v.readOnly||!B(u,f)){var d=a||e.type===N;Object.defineProperty(u,f,{value:void 0,configurable:d,writable:!0}),a=c(u,f,a)}}H[BLOCK](t,e,n,i,r,s,o,a)},H[BLOCK]=function(t,e,n,i,r,s,o,a){var c=t.children,h=function(t,a){t<c.length?u(c[t],e,function(e,n){h(t+1,n)},i,r,s,o,a):n(void 0,a)};h(0,a)},H[IF]=function(t,e,n,i,r,s,a,c){var h=function(o,c){o?u(t.thenPart,e,n,i,r,s,a,c):t.elsePart?u(t.elsePart,e,n,i,r,s,a,c):n(o,c)};o(t.condition,e,h,i,r,s,a,c)},H[SWITCH]=function(t,e,n,i,r,s,a,c){var h=function(c,h){var l=t.cases,p=function(t,e){t===l.length?n(void 0,e):f(t,e)},f=function(o,c){var h=l[o];if(h.statements.children.length){var f=function(e,i){e===t?n(void 0,i):s(e,i)},E=function(t,e){p(o+1,e)};u(h.statements,e,E,i,r,f,a,c)}else p(o+1,c)},E=function(u,h){if(u===l.length)t.defaultIndex>=0?f(t.defaultIndex,h):n(void 0,h);else{var p=l[u];p.type===CASE?o(p.caseLabel,e,function(t,e){t===c?f(u,e):E(u+1,e)},i,r,s,a,h):E(u+1,h)}};E(0,h)};o(t.discriminant,e,h,i,r,s,a,c)},H[FOR]=function(t,e,n,i,r,s,a,c){var h=function(n,r){t.update?o(t.update,e,p,i,null,null,a,r):p(null,r)},l=function(o){var c=function(e,n){e===t?h(null,n):r(e,n)},l=function(e,i){e===t?n(void 0,i):s(e,i)};u(t.body,e,h,i,c,l,a,o)},p=function(c,u){if(t.condition){var h=function(t,e){t?l(e):n(void 0,e)};o(t.condition,e,h,i,r,s,a,u)}else l(u)};t.type===WHILE?p(null,c):t.setup?o(t.setup,e,p,i,r,s,a,c):p(null,c)},H[WHILE]=H[FOR],H[FOR_IN]=function(t,e,n,i,r,a,c,h){var l=function(h,l){var p=t.iterator,f=[],E=function(o,h){o<f.length?u(p,e,function(l){var d=function(e,n){e===t?E(o+1,n):r(e,n)},I=function(e){e===t?n(void 0,h):a(e,h)};s(e,l,f[o],p,e.strict,function(n,r){u(t.body,e,function(t,e){E(o+1,e)},i,d,I,c,r)},c,h)},i,r,a,c,h):n(void 0,h)};o(t.object,e,function(e,n,i){null===e||void 0===e?e:A(e,i,t.object);for(var r in e)f.push(r);E(0,n)},i,r,a,c,l)};t.varDecl?u(t.varDecl,e,l,i,r,a,c,h):l(void 0,h)},H[DO]=function(t,e,n,i,r,s,a,c){var h=function(r,s){var c=function(t,e){t?f(e):n(void 0,e)};o(t.condition,e,c,i,null,null,a,s)},l=function(e,n){e===t?f(n):r(e,n)},p=function(e,i){e===t?n(void 0,i):s(e,i)},f=function(n){u(t.body,e,h,i,l,p,a,n)};f(c)},H[BREAK]=function(t,e,n,i,r,s,o,a){s(t.target,a)},H[CONTINUE]=function(t,e,n,i,r,s,o,a){r(t.target,a)},H[TRY]=function(t,e,n,i,r,s,o,a){if(t.finallyBlock){var c=function(n,i,r,s,o){return function(a,c){var h=function(t,i){e.result=a,n(a,i)};u(t.finallyBlock,e,h,i,r,s,o,c)}};n=c(n,i,r,s,o),i=c(i,i,r,s,o),r=c(r,i,r,s,o),s=c(s,i,r,s,o),o=c(o,i,r,s,o)}var h=function(a,c){if(e.result=void 0,1===t.catchClauses.length){var h=t.catchClauses[0];e.scope={object:new _,parent:e.scope},Object.defineProperty(e.scope.object,h.varName,{value:a,writable:!0,configurable:!1,enumerable:!0}),u(h.block,e,function(t,i){e.scope=e.scope.parent,n(void 0,i)},i,r,s,o,c)}else o(a,c)};u(t.tryBlock,e,n,i,r,s,h,a)},H[THROW]=function(t,e,n,i,r,s,a,c){o(t.exception,e,a,i,r,s,a,c)},H[RETURN]=function(t,e,n,i,r,s,a,c){t.value?o(t.value,e,function(t,n){e.result=t,i(t,n)},i,r,s,a,c):(e.result=void 0,i(void 0,c))},H[WITH]=function(t,e,n,i,r,s,a,c){var h=function(o,c,h){o=A(o,h,t.object);var l=e.copy();l.scope={object:o,parent:e.scope},u(t.body,l,n,i,r,s,a,c)};o(t.object,e,h,i,r,s,a,c)},H[VAR]=function(t,e,i,r,s,a,c,u){var h=t.children,l=function(t,u){if(t<h.length){var p=h[t].initializer;if(p){for(var f=h[t].name,E=e.scope;E&&!B(E.object,f);E=E.parent);o(p,e,function(e,i){var r=n(E.object,f,i);nonStrictPutValue(E.object,f,e),l(t+1,r)},r,s,a,c,u)}else l(t+1,u)}else i(void 0,u)
};l(0,u)},H[SEMICOLON]=function(t,e,n,i,r,s,a,c){t.expression?o(t.expression,e,function(t,i){e.result=t,n(void 0,i)},i,r,s,a,c):n(void 0,c)},H[LABEL]=function(t,e,n,i,r,s,o,a){u(t.statement,e,n,i,r,function(e,i){e===t.target?n(void 0,i):s(e,i)},o,a)},H[COMMA]=function(t,e,n,i,r,s,a,c){var u=t.children,h=function(t,c,l){t<u.length?o(u[t],e,function(e,n){h(t+1,e,n)},i,r,s,a,l):n(c,l)};h(0,void 0,c)},H[ASSIGN]=function(t,n,i,a,c,h,l,p){var f=t.children,E=function(u){function E(t,e){o(f[1],n,function(e,r){if(d)switch(d){case BITWISE_OR:e=t|e;break;case BITWISE_XOR:e=t^e;break;case BITWISE_AND:e=t&e;break;case LSH:e=t<<e;break;case RSH:e=t>>e;break;case URSH:e=t>>>e;break;case PLUS:e=t+e;break;case MINUS:e=t-e;break;case MUL:e=t*e;break;case DIV:e=t/e;break;case MOD:e=t%e}s(n,u,e,f[0],n.strict,i,l,r)},a,c,h,l,e)}var d=t.assignOp;d?r(n,u,E,l,p):(!n.strict||e(u,l,p))&&E(void 0,p)};u(f[0],n,E,a,c,h,l,p)},H[HOOK]=function(t,e,n,i,r,s,a,c){var u=t.children;o(u[0],e,function(t,c){o(t?u[1]:u[2],e,n,i,r,s,a,c)},i,r,s,a,c)},H[OR]=function(t,e,n,i,r,s,a,c){var u=t.children,h=function(t,c){t?n(t,c):o(u[1],e,function(t,e){n(t,e)},i,r,s,a,c)};o(u[0],e,h,i,r,s,a,c)},H[AND]=function(t,e,n,i,r,s,a,c){var u=t.children,h=function(t,c){t?o(u[1],e,function(t,e){n(t,e)},i,r,s,a,c):n(t,c)};o(u[0],e,h,i,r,s,a,c)},H[BITWISE_OR]=a(function(t,e){return t|e}),H[BITWISE_XOR]=a(function(t,e){return t^e}),H[BITWISE_AND]=a(function(t,e){return t&e}),H[EQ]=a(function(t,e){return t==e}),H[NE]=a(function(t,e){return t!=e}),H[STRICT_EQ]=a(function(t,e){return t===e}),H[STRICT_NE]=a(function(t,e){return t!==e}),H[LT]=a(function(t,e){return t<e}),H[LE]=a(function(t,e){return t<=e}),H[GT]=a(function(t,e){return t>e}),H[GE]=a(function(t,e){return t>=e}),H[IN]=a(function(t,e){return t in e}),H[INSTANCEOF]=function(t,e,n,i,r,s,a,c){var u=t.children;o(u[0],e,function(t,c){o(u[1],e,function(e,i){var r;r=x(e)&&O.has(e)?D(e,t):t instanceof e,n(r,i)},i,r,s,a,c)},i,r,s,a,c)},H[LSH]=a(function(t,e){return t<<e}),H[RSH]=a(function(t,e){return t>>e}),H[URSH]=a(function(t,e){return t>>>e}),H[PLUS]=a(function(t,e){return t+e}),H[MINUS]=a(function(t,e){return t-e}),H[MUL]=a(function(t,e){return t*e}),H[DIV]=a(function(t,e){return t/e}),H[MOD]=a(function(t,e){return t%e}),H[DELETE]=function(e,i,r,s,o,a,c,h){u(e.children[0],i,function(e,s){var o=!(e instanceof t)||!e.base,a=s;o||(a=n(e.base,e.propertyName,s),o=i.strict?delete e.base[e.propertyName]:nonStrictDeleteValue(e.base,e.propertyName)),r(o,a)},s,o,a,c,h)},H[VOID]=function(t,e,n,i,r,s,a,c){o(t.children[0],e,function(t,e){n(void 0,e)},i,r,s,a,c)},H[TYPEOF]=function(e,n,i,s,o,a,c,h){u(e.children[0],n,function(e,s){e instanceof t?e.base?r(n,e,function(t,e){i(typeof t,e)},c,s):i("undefined",s):i(typeof e,s)},s,o,a,c,h)},H[NOT]=c(function(t){return!t}),H[BITWISE_NOT]=c(function(t){return~t}),H[UNARY_PLUS]=c(function(t){return+t}),H[UNARY_MINUS]=c(function(t){return-t}),H[INCREMENT]=function(t,e,n,i,r,a,c,u){o(t.children[0],e,function(i,r,o){var a=Number(i),u=a,h=t.type===INCREMENT?++a:--a;s(e,o,h,t.children[0],e.strict,function(e,i){n(t.postfix?u:a,i)},c,r)},i,r,a,c,u)},H[DECREMENT]=H[INCREMENT],H[DOT]=function(e,n,i,r,s,a,c,u){var h=e.children;o(h[0],n,function(n,r,s){var o=h[1].value;k(n,s,h[0]);var a=new t(n,o,e);i(a,r)},r,s,a,c,u)},H[INDEX]=function(e,n,i,r,s,a,c,u){var h=e.children;o(h[0],n,function(u,l,p){o(h[1],n,function(n,r){k(u,p,h[0]);var s=new t(u,String(n),e);i(s,r)},r,s,a,c,l)},r,s,a,c,u)},H[LIST]=function(t,e,n,i,r,s,a,c){var u=[],h=t.children,l=function(t,c){t<h.length?o(h[t],e,function(e,n){u[t]=e,l(t+1,n)},i,r,s,a,c):n(u,c)};l(0,c)},H[CALL]=function(e,i,r,s,a,c,h,l){var p=e.children;o(p[0],i,function(o,l,f){u(p[1],i,function(u,l){if("function"!==typeof o)h(w(o+" is not callable",p[0].filename,p[0].lineno),l);else{var E,d;if(o!==R.eval||f instanceof t&&"eval"===f.propertyName&&f.base[f]===R.eval?o===R.eval?E=i.thisObject:(E=f instanceof t?f.base:void 0,E instanceof _&&(E=void 0)):d={indirectEval:!0},i.control){var I=r;r=function(t,r){var s=n(i,"returnedValue",r);i.returnedValue=t,i.control(e,i,function(e){I(t,e)},s)}}U(o,E,u,i,r,s,a,c,h,l,d)}},s,a,c,h,l)},s,a,c,h,l)},H[NEW]=function(t,e,n,i,r,s,a,c){var h=t.children;o(h[0],e,function(o,c,l){var p=function(t,c){"function"!==typeof o?a(w(l+" is not a constructor",h[0].filename,h[0].lineno),c):M(o,t,e,n,i,r,s,a,c)};if(t.type===NEW){var f=new R.Object;Object.defineProperty(f,"length",{value:0,writable:!0,configurable:!0,enumerable:!1}),p(f,c)}else u(h[1],e,p,i,r,s,a,c)},i,r,s,a,c)},H[NEW_WITH_ARGS]=H[NEW],H[ARRAY_INIT]=function(t,e,i,r,s,a,c,u){var h=[],l=function(u,p){if(u<t.children.length)t.children[u]?o(t.children[u],e,function(t,e){var i=n(h,u,e);h[u]=t,l(u+1,i)},r,s,a,c,p):l(u+1,p);else{var f=S(h);f.length=t.children.length,i(f,p)}};l(0,u)},H[OBJECT_INIT]=function(t,e,i,r,s,a,c,u){var l=new R.Object,p=t.children,f=function(t,u){if(t<p.length){var E=p[t];if(E.type===PROPERTY_INIT)o(E.children[1],e,function(e,i){var r=E.children[0].value,s=n(l,r,i);Object.defineProperty(l,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),f(t+1,s)},r,s,a,c,u);else{var d=F(E,e);E.type===GETTER?Object.defineProperty(l,E.name,{get:h(d,e),enumerable:!0,configurable:!0}):Object.defineProperty(l,E.name,{set:h(d,e),enumerable:!0,configurable:!0}),f(t+1,u)}}else i(l,u)};f(0,u)},H[NULL]=function(t,e,n,i,r,s,o,a){n(null,a)},H[THIS]=function(t,e,n,i,r,s,o,a){n(e.thisObject,a)},H[TRUE]=function(t,e,n,i,r,s,o,a){n(!0,a)},H[FALSE]=function(t,e,n,i,r,s,o,a){n(!1,a)},H[IDENTIFIER]=function(e,n,i,r,s,o,a,c){for(var u=n.scope;u&&!(e.value in u.object);u=u.parent);i(new t(u&&u.object,e.value,e),c)},H[NUMBER]=function(t,e,n,i,r,s,o,a){n(t.value,a)},H[STRING]=H[NUMBER],H[REGEXP]=H[NUMBER],H[GROUP]=function(t,e,n,i,r,s,o,a){u(t.children[0],e,n,i,r,s,o,a)},m.global=b,m.globalBase=y.globalBase,m.translate=y.translate,m.resetEnvironment=y.resetEnvironment,m.evaluate=l,m.evaluateInContext=p,m.execute=u,m.createExecutionContext=f,m.createEvalExecutionContext=E,m.createFunctionExecutionContext=d,m}};
